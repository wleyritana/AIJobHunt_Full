{% extends "base.html" %}
{% block content %}
<h1>Analytics</h1>

<div class="cards">
  <div class="card">
    <h3>Summary</h3>
    <ul>
      <li>Total runs: <strong>{{ total_runs }}</strong></li>
      <li>Avg score before: <strong>{{ avg_before }}</strong></li>
      <li>Avg score after: <strong>{{ avg_after }}</strong></li>
      <li>Runs improved: <strong>{{ improved }}</strong></li>
    </ul>
  </div>

  <div class="card">
    <h3>Last 10 runs</h3>
    <ul class="runs">
      {% for r in last10 %}
        <li>
          <a href="{{ url_for('flow.result', run_id=r.id) }}">
            Run #{{ r.id }} · {{ r.target_role or "No role" }} ·
            <span class="muted">{{ r.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
          </a>
        </li>
      {% else %}
        <li class="muted">No data yet.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
